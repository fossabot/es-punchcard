<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Elasticsearch Punchcard Demo</title>

    <link rel="stylesheet" href="/js/bootstrap/dist/css/bootstrap.min.css" /> <!-- load bootstrap css -->
    <link rel="stylesheet" href="style.css" /> <!-- load punchcard css -->

    <script src="js/jquery/dist/jquery.min.js"></script>
    <script src="js/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="js/d3/d3.min.js"></script>
    <script src="js/moment/moment.js"></script>
    <script src="es-punchcard.js"></script>

</head>
<body>
<div class="panel panel-default">
    <div class="panel-heading">
        keywords co-occurrence
    </div>
    <div class="panel-body">
        <div class="row">
            <div class="col-lg-12" style="text-align: center;">
                <div id="punchcard-mount-point">

                </div>

                <script>
                    var data = {"took":273,"total":320001,"aggs":{"keywords":{"doc_count":320001,"buckets":[{"key":"carbon emissions","doc_count":320001,"score":52.34230602030492,"bg_count":519874,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":1916},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":28383},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":31190},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":32671},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":44745},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":31513},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":24680},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":18625},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":43595},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":62683}]}},{"key":"pollution","doc_count":82126,"score":3.687859460108738,"bg_count":463059,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":135},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":5750},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":5523},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":7719},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":13788},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":17588},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":7188},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":4972},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":8701},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":10762}]}},{"key":"fossil fuels","doc_count":95595,"score":3.606228946913915,"bg_count":633754,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":1356},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":5814},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":8332},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":11119},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":15720},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":5481},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":6292},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":5780},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":13769},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":21932}]}},{"key":"greenhouse gas","doc_count":104731,"score":3.4109030656677604,"bg_count":794615,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":1400},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":10576},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":12806},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":10242},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":13122},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":6248},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":5837},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":7262},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":14129},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":23109}]}},{"key":"greenhouse gas emissions","doc_count":88423,"score":3.3831201750661175,"bg_count":578606,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":1380},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":9280},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":10644},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":8092},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":10403},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":4489},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":4724},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":6212},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":11763},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":21436}]}},{"key":"renewable energy","doc_count":65011,"score":3.269422268255815,"bg_count":329601,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":225},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":6709},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":7064},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":7454},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":12034},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":5825},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":5102},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":3589},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":7960},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":9049}]}},{"key":"power plants","doc_count":40267,"score":3.050428101004106,"bg_count":138245,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":50},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":2187},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":5291},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":6271},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":3005},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":6879},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":2547},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":2503},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":5952},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":5582}]}},{"key":"gas emissions","doc_count":88754,"score":2.969318858517933,"bg_count":657059,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":1380},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":9300},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":10657},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":8101},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":10531},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":4499},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":4755},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":6255},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":11803},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":21473}]}},{"key":"deep ocean","doc_count":11042,"score":2.7725080096549046,"bg_count":11763,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":3},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":0},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":0},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":0},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":0},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":10769},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":270}]}},{"key":"Forced migrations","doc_count":11569,"score":2.7714300486581953,"bg_count":12910,"monthly":{"buckets":[{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":10765},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":303},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":140},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":106},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":255}]}},{"key":"ocean ecosystems","doc_count":12140,"score":2.6808705705832896,"bg_count":14680,"monthly":{"buckets":[{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":205},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":742},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":10743},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":268},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":136},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":0},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":46}]}},{"key":"wind patterns","doc_count":11382,"score":2.651389942824647,"bg_count":13057,"monthly":{"buckets":[{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":10753},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":278},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":140},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":65},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":146}]}},{"key":"carbon dioxide and methane","doc_count":11226,"score":2.642294474274216,"bg_count":12747,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":4},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":67},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":93},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":0},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":0},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":10751},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":311}]}},{"key":"low-carbon","doc_count":44241,"score":2.552426251315116,"bg_count":196995,"monthly":{"buckets":[{"key_as_string":"2015-03-01T00:00:00.000Z","key":1425168000000,"doc_count":144},{"key_as_string":"2015-04-01T00:00:00.000Z","key":1427846400000,"doc_count":3209},{"key_as_string":"2015-05-01T00:00:00.000Z","key":1430438400000,"doc_count":4727},{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":6621},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":9327},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":955},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":2036},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":2669},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":5932},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":8621}]}},{"key":"model predictions","doc_count":11457,"score":2.5013105482273215,"bg_count":14011,"monthly":{"buckets":[{"key_as_string":"2015-06-01T00:00:00.000Z","key":1433116800000,"doc_count":73},{"key_as_string":"2015-07-01T00:00:00.000Z","key":1435708800000,"doc_count":0},{"key_as_string":"2015-08-01T00:00:00.000Z","key":1438387200000,"doc_count":10743},{"key_as_string":"2015-09-01T00:00:00.000Z","key":1441065600000,"doc_count":290},{"key_as_string":"2015-10-01T00:00:00.000Z","key":1443657600000,"doc_count":136},{"key_as_string":"2015-11-01T00:00:00.000Z","key":1446336000000,"doc_count":169},{"key_as_string":"2015-12-01T00:00:00.000Z","key":1448928000000,"doc_count":46}]}}]}},"hits":{"total":320001,"max_score":0,"hits":[]}};

                    //setting some settings
                    punchcard.width = 500;
                    punchcard.top = 50;
                    punchcard.svgID = "myFristChart";
                    punchcard.custom_start_year = "2015-05";
                    punchcard.custom_end_year = "2015-12";
                    punchcard.d3DateFormat = "%Y-%m";
                    punchcard.dataDateFormat = "YYYY-MM";
                    punchcard.customTickFormat = "%m";
                    punchcard.init();

                    //load the data into punchcard
                    punchcard.draw(data);

                    //testing with new data
                    setTimeout(function(){

                        data.aggs.keywords.buckets.splice(2);

                        punchcard.svgID = "mySecondChart";
                        punchcard.width = 500;
                        punchcard.height = 200;
                        punchcard.top = 60;
                        punchcard.d3DateFormat = "%Y-%m";
                        punchcard.dataDateFormat = "YYYY-MM";
                        punchcard.customTickFormat = "%Y-%m";

                        punchcard.init();
                        punchcard.draw(data);
                    }, 2000);
                </script>

            </div>
        </div>
    </div>
</div>
</body>
</html>